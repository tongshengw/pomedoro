{%extends "layout.html"%}

{%block title%}Pomedoro{%endblock%}

{%block body%}
<main>
    <div class="options-bar">
        <div class="row">

            <div class="option">Focus</div>
            <div class="time-options">
                <div class="text-button">
                    <span>15</span>
                </div>
                <div class="text-button">
                    <span>20</span>
                </div>
                <div class="text-button last-element">
                    <span>25</span>
                </div>
            </div>

            <div class="spacer"></div>

            <div class="option first-element">Rest</div>
            <div class="time-options">
                <div class="text-button">
                    <span>5</span>
                </div>
                <div class="text-button">
                    <span>7</span>
                </div>
                <div class="text-button last-element">
                    <span>10</span>
                </div>

            <div class="spacer"></div>

            <div class="option first-element">Sessions</div>
            <div class="time-options">
                <div class="text-button">
                    <span>1</span>
                </div>
                <div class="text-button">
                    <span>2</span>
                </div>
                <div class="text-button">
                    <span>3</span>
                </div>
            </div>

            </div>
        </div>
    </div>

    <div style="height: 4rem;"></div>

    <div class="progressbar-container">
        <div class="progressbar">
            <span id="percentage">0%</span>
        </div>
    </div>
</main>
    

    
{%endblock%}

{%block script%}
    <script>
        var time = 1;
        var timeleft = time;
        var progressBar = document.getElementsByClassName("progressbar")[0];
        var x = setInterval(function() {

            timeleft -= 0.05;

            var percentage = document.getElementById("percentage");
            
            var smoothCompletion = ((1-timeleft/time) *100);
            var completion = Math.round(smoothCompletion);

            // completion is from 0-100 and is the percentage completion of the progress bar
            percentage.innerHTML = completion + "%";
            console.log(completion)
            if (smoothCompletion > 5){
                progressBar.style.width = smoothCompletion + "%";
            }
            else{
                progressBar.style.width = 5 + "%"
            }
                
            if (timeleft <= 0) {
                clearInterval(x);
            }
        },50);
    </script>
{%endblock%}